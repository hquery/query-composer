

<%= simple_form_for(@code_set) do |f| %>

<%= f.error_notification %>

<%= f.hidden_field :id %>

  <table class="simpleTable">
    <tr>
      <th>Name</th>
      <td><%= f.input_field :name, :class=> "entryField" %></td>
    </tr>
    <tr>
      <th>type</th>
      <td><%= f.input_field :type, :class=> "entryField" %></td>
    </tr>
    
    <tr>
      <th>Description</th>
      <td><%= f.input_field :description, :class=> "entryField" %></td>
    </tr>
    
    
    <tr>
      <th>Codes</th>
      <td id="codes">
        
         <%
         index = 0
          (@code_set.codes || {}).each_pair do |k,v| %>
             <%=  text_field_tag "code_set[codes][][code_system]", k, :class=> "codeField" %>
             <%=  text_field_tag  "code_set[codes][][codes]", v.join(", "), :class=> "codeField" %> 
            
         <% 
          index = index + 1
         end %>
         <a id="add_code_system" class="btn tbbtn">Add</a>
      </td>
      </tr>
  </table>

<script>
 var current_index = <%= index %>;
 $(document).ready(function(){
   $("#add_code_system").click(function(){
     var div = $("<div>");
     var span = $("<span>").append($("<input>",{"type":"text", "name":"code_set[codes][][code_system]"}));
     var span2 = $("<span>").append($("<input>",{"type":"text", "name":"code_set[codes][][codes]"}));
     div.append(span).append(" ").append(span2);
     $(this).before(div);
   });
 });
</script>  
<div class="actions">
  <%= f.button :submit, :class=>"btn primary form" %>

</div>

<% end %>

