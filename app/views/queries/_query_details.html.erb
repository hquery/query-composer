<%= stylesheet_link_tag "validator/styles.css"%>
<%= javascript_include_tag "validator/src/ace" %>
<%= javascript_include_tag "validator/src/mode-javascript" %>
<%= javascript_include_tag "validator/validator" %>
<%= javascript_include_tag "validator/records" %>
<%= simple_form_for @query do |f| %>

<%
  is_new = @query.title.nil?
%>

<table class="simpleTable">
  <tr><td>Title</td><td><%= f.input_field :title, :disabled => @disabled %></td></tr>
  <tr><td>Description</td><td><%= f.input_field :description, :disabled => @disabled %></td></tr>
  <% if not is_new %>
    <tr><td>Filter</td><td><%= f.input_field :filter, :disabled => @disabled %></td></tr>
    <tr><td>Map Function</td><td><%= f.input_field :map, :as => :text, :disabled => @disabled %></td></tr>
    <tr><td>Reduce Function</td><td><%= f.input_field :reduce, :as => :text, :disabled => @disabled %></td></tr>
  <% else %>
    <tr>
      <td>Mode</td>
      <td>
        <%= f.radio_button :generated, true, :checked => true %> Graphical Builder
        <%= f.radio_button :generated, false, :checked => false %> Handwritten JavaScript (Advanced)
      </td>
    </tr>
  <% end %>
</table>



<div class="ctrl"> 
  <% if (not is_new) %>
    <%= f.button :submit if !@disabled %>
    <%= link_to 'cancel', @query %>
    <span class="ctrl btn">  
      <input id="debug" type="button" value="Debug" disabled="disabled" class="btn"> <input id="records" type="button" value="Records">
    </span>
  <% else %>
    <%= f.button :submit, 'Continue' if !@disabled %>
    <%= link_to 'cancel', queries_path %>
  <% end %> 
</div>
<% end %>

